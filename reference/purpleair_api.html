<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Interface with the PurpleAir API — purpleair_api • airquality</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Interface with the PurpleAir API — purpleair_api"><meta name="description" content='PurpleAir provides access to the observations from their network of low-cost PM2.5 monitors through a points-based API system.
New accounts start with 1M points, and each request has a cost from 1-5 points plus the number of rows times the total column cost
(which depends on the column, typically 1-2 points per column).
Point can be purchased on develop.purpleair.com and cost less if buying in bulk.
For more information, see: api.purpleair.com
In order to retrieve these data you must:
make an account on develop.purpleair.com (a google account is required, which can be made using any email)
create a new project, click on it after it is created
add two API keys, 1 for reading (getting data), 1 for writing (making groups of sensors)
(Optional) open your .Renviron for editing (you can use usethis::edit_r_environ("project") after installing the usethis package)
(Optional) add your keys on 2 seperate lines in this format: purpleair_api_read = "YOUR-API-KEY-HERE"
(Optional) refer to keys using read_key = Sys.getenv("purpleair_api_read") to keep your API key secure


purpleair_api() requires either a read or write key (depending on what you are trying to do), a channel name to make a request to,
and (depending on the request type you want to make) a named list of parameters.
See api.purpleair.com for which parameters are avalailable for each request type.
Based on the provided channel/parameters, the request and estimated points cost will be displayed,
and the request will be made if desired. Set quiet to TRUE to silence this and always run the request
(caution, some requests may cost a lot of points)'><meta property="og:description" content='PurpleAir provides access to the observations from their network of low-cost PM2.5 monitors through a points-based API system.
New accounts start with 1M points, and each request has a cost from 1-5 points plus the number of rows times the total column cost
(which depends on the column, typically 1-2 points per column).
Point can be purchased on develop.purpleair.com and cost less if buying in bulk.
For more information, see: api.purpleair.com
In order to retrieve these data you must:
make an account on develop.purpleair.com (a google account is required, which can be made using any email)
create a new project, click on it after it is created
add two API keys, 1 for reading (getting data), 1 for writing (making groups of sensors)
(Optional) open your .Renviron for editing (you can use usethis::edit_r_environ("project") after installing the usethis package)
(Optional) add your keys on 2 seperate lines in this format: purpleair_api_read = "YOUR-API-KEY-HERE"
(Optional) refer to keys using read_key = Sys.getenv("purpleair_api_read") to keep your API key secure


purpleair_api() requires either a read or write key (depending on what you are trying to do), a channel name to make a request to,
and (depending on the request type you want to make) a named list of parameters.
See api.purpleair.com for which parameters are avalailable for each request type.
Based on the provided channel/parameters, the request and estimated points cost will be displayed,
and the request will be made if desired. Set quiet to TRUE to silence this and always run the request
(caution, some requests may cost a lot of points)'><meta property="og:image" content="https://b-nilson.github.io/airquality/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">airquality</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/B-Nilson/airquality/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Interface with the PurpleAir API</h1>
      <small class="dont-index">Source: <a href="https://github.com/B-Nilson/airquality/blob/main/R/data_purpleair.R" class="external-link"><code>R/data_purpleair.R</code></a></small>
      <div class="d-none name"><code>purpleair_api.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>PurpleAir provides access to the observations from their network of low-cost PM2.5 monitors through a points-based API system.
New accounts start with 1M points, and each request has a cost from 1-5 points plus the number of rows times the total column cost
(which depends on the column, typically 1-2 points per column).
Point can be purchased on develop.purpleair.com and cost less if buying in bulk.</p>
<p>For more information, see: api.purpleair.com</p>
<p>In order to retrieve these data you must:</p><ul><li><p>make an account on develop.purpleair.com (a google account is required, which can be made using any email)</p></li>
<li><p>create a new project, click on it after it is created</p></li>
<li><p>add two API keys, 1 for reading (getting data), 1 for writing (making groups of sensors)</p></li>
<li><p>(Optional) open your .Renviron for editing (you can use <code>usethis::edit_r_environ("project")</code> after installing the usethis package)</p></li>
<li><p>(Optional) add your keys on 2 seperate lines in this format: <code>purpleair_api_read = "YOUR-API-KEY-HERE"</code></p></li>
<li><p>(Optional) refer to keys using <code>read_key = Sys.getenv("purpleair_api_read")</code> to keep your API key secure</p></li>
</ul><p><code>purpleair_api()</code> requires either a read or write key (depending on what you are trying to do), a channel name to make a request to,
and (depending on the request type you want to make) a named list of parameters.
See api.purpleair.com for which parameters are avalailable for each request type.
Based on the provided channel/parameters, the request and estimated points cost will be displayed,
and the request will be made if desired. Set <code>quiet</code> to <code>TRUE</code> to silence this and always run the request
(caution, some requests may cost a lot of points)</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">purpleair_api</span><span class="op">(</span></span>
<span>  read_key <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  write_key <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">channel</span>,</span>
<span>  parameters <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  estimate_cost <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-read-key">read_key<a class="anchor" aria-label="anchor" href="#arg-read-key"></a></dt>
<dd><p>(Optional) A single character value of your PurpleAir API read key (see develop.purpleair.com). If NULL, write_key must be provided.</p></dd>


<dt id="arg-write-key">write_key<a class="anchor" aria-label="anchor" href="#arg-write-key"></a></dt>
<dd><p>(Optional) A single character value of your PurpleAir API write key (see develop.purpleair.com). If NULL, read_key must be provided.</p></dd>


<dt id="arg-channel">channel<a class="anchor" aria-label="anchor" href="#arg-channel"></a></dt>
<dd><p>A single character value indicating what API channel to use (Currently supported: keys, organization, sensors, groups)</p></dd>


<dt id="arg-parameters">parameters<a class="anchor" aria-label="anchor" href="#arg-parameters"></a></dt>
<dd><p>(Optional) A named list containing paramaters to be supplied to the API request (see api.purpleair.com).</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>(Optional) A single logical (TRUE or FALSE) value indicating if
non-critical messages/warnings should be silenced.</p></dd>


<dt id="arg-estimate-cost">estimate_cost<a class="anchor" aria-label="anchor" href="#arg-estimate-cost"></a></dt>
<dd><p>(Optional) A single logical (TRUE or FALSE) value indicating if
the cost of the request should be estimated.
Default is TRUE.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>If channel either "keys" or "organization", or invalid/missing parameters, then a list with the request results
If sensors or groups channel, then a tibble with the data returned from the request</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other Data Collection:
<code><a href="get_abgov_data.html">get_abgov_data</a>()</code>,
<code><a href="get_abgov_stations.html">get_abgov_stations</a>()</code>,
<code><a href="get_airnow_data.html">get_airnow_data</a>()</code>,
<code><a href="get_airnow_stations.html">get_airnow_stations</a>()</code>,
<code><a href="get_bcgov_data.html">get_bcgov_data</a>()</code>,
<code><a href="get_bcgov_stations.html">get_bcgov_stations</a>()</code></p>
<p>Other Canadian Air Quality:
<code><a href="CAAQS.html">CAAQS</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">read_key</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"purpleair_api_read"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">write_key</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"purpleair_api_write"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">parameters</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span> <span class="co"># see api.purpleair.com for more</span></span></span>
<span class="r-in"><span>  nwlat <span class="op">=</span> <span class="fl">53.93</span>, nwlng <span class="op">=</span> <span class="op">-</span><span class="fl">122.77</span>,</span></span>
<span class="r-in"><span>  selat <span class="op">=</span> <span class="fl">53.9</span>, selng <span class="op">=</span> <span class="op">-</span><span class="fl">122.73</span>,</span></span>
<span class="r-in"><span>  fields <span class="op">=</span> <span class="st">"temperature"</span>,</span></span>
<span class="r-in"><span>  sensor_index <span class="op">=</span> <span class="fl">198385</span>,</span></span>
<span class="r-in"><span>  start_timestamp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/period.html" class="external-link">hours</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get Sensors Data</span></span></span>
<span class="r-in"><span><span class="co"># test = purpleair_api(read_key = read_key, channel = "sensors",</span></span></span>
<span class="r-in"><span><span class="co">#   parameters = parameters[1:5])</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get Sensor Data</span></span></span>
<span class="r-in"><span><span class="co"># test = purpleair_api(read_key = read_key, channel = "sensors",</span></span></span>
<span class="r-in"><span><span class="co">#  parameters = parameters[5:6])</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get Sensor History</span></span></span>
<span class="r-in"><span><span class="co"># test = purpleair_api(read_key = read_key, channel = "sensors",</span></span></span>
<span class="r-in"><span><span class="co"># parameters = parameters[5:7])</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Brayden Nilson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

